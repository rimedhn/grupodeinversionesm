<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <style type="text/css">
        body { font-family: Arial, sans-serif; font-size: 9px; margin: 0; padding: 0; }
        .page {
            width: 8.5in;
            min-height: 11in;
            padding: 0.4in;
            margin: auto;
            background: white;
            page-break-after: always;
        }
        table { width: 100%; border-collapse: collapse; margin-bottom: 5px; table-layout: fixed; }
        th, td { border: 1px solid black; padding: 3px; vertical-align: top; overflow: hidden; }
        .header-title { text-align: center; font-weight: bold; font-size: 16px; margin: 0; }
        .section-title { background-color: #e0e0e0; text-align: center; font-weight: bold; text-transform: uppercase; padding: 2px; border: 1px solid black; }
        .label { font-weight: bold; font-size: 8px; display: block; text-transform: uppercase; margin-bottom: 2px; }
        .no-border { border: none !important; }
        .mi-logo { width: 65px; height: 65px; }
        .check-box { display: inline-block; width: 10px; height: 10px; border: 1px solid black; margin-right: 2px; text-align: center; line-height: 10px; font-size: 8px; vertical-align: middle; }
        .footer-sig { margin-top: 20px; display: flex; justify-content: space-around; text-align: center; }
        .sig-line { border-top: 1px solid black; width: 180px; margin-top: 40px; padding-top: 5px; }
        .data-val { font-size: 10px; min-height: 12px; display: block; }
    </style>
</head>
<body>

<div class="page">
    <table class="no-border">
        <tr>
            <td class="no-border" style="width: 15%;"><img src="https://github.com/rimedhn/servicredith/blob/main/servicredith%20logo.jpeg?raw=true" class="mi-logo" /></td>
            <td class="no-border" style="text-align: center;">
                <h1 class="header-title">SOLICITUD DE CRÉDITO</h1>
                <div style="font-weight: bold; font-size: 14px;">SERFIN</div>
            </td>
            <td class="no-border" style="width: 15%; text-align: right;">
                <span class="label">Fecha</span> <span id="fecha_p1" class="data-val"></span>
            </td>
        </tr>
    </table>

    <table>
        <tr>
            <td colspan="2"><span class="label">Nombre completo</span><span id="c_nombre" class="data-val"></span></td>
            <td><span class="label"># DNI</span><span id="c_dni" class="data-val"></span></td>
        </tr>
        <tr>
            <td><span class="label">Estado civil / Ciclo</span><div class="data-val"><span id="c_civil"></span> / <span id="c_ciclo"></span></div></td>
            <td><span class="label">Ocupación / Edad</span><div class="data-val"><span id="c_ocupacion"></span> / <span id="c_edad"></span></div></td>
            <td><span class="label">Sexo / Celular</span><div class="data-val"><span id="c_sexo"></span> / <span id="c_cel"></span></div></td>
        </tr>
        <tr>
            <td><span class="label">Dependientes / Monto solicitado</span><div class="data-val"><span id="c_dependientes"></span> / L. <span id="c_monto"></span></div></td>
            <td><span class="label">Plazo solicitado</span><span id="c_plazo" class="data-val"></span></td>
            <td><span class="label">Destino del préstamo</span><span id="c_destino" class="data-val"></span></td>
        </tr>
        <tr>
            <td><span class="label">Producto / Frecuencia</span><div class="data-val"><span id="c_producto"></span> / <span id="c_frecuencia"></span></div></td>
            <td><span class="label">Cuota</span><span id="c_cuota" class="data-val"></span></td>
            <td><span class="label">Tipo de negocio</span><span id="c_tipo_negocio" class="data-val"></span></td>
        </tr>
        <tr>
            <td colspan="3">
                <div style="display: flex; justify-content: space-around;">
                    <div><span class="label">Local del Negocio</span> <span class="check-box" id="c_lp"></span> Pro. <span class="check-box" id="c_la"></span> Alqui.</div>
                    <div><span class="label">Casa de habitación</span> <span class="check-box" id="c_cp"></span> Pro. <span class="check-box" id="c_ca"></span> Alqui.</div>
                </div>
            </td>
        </tr>
        <tr>
            <td><span class="label">Nombre del negocio</span><span id="c_neg_nom" class="data-val"></span></td>
            <td><span class="label">Antigüedad del negocio</span><span id="c_neg_ant" class="data-val"></span></td>
            <td><span class="label"># de empleados</span><span id="c_empleados" class="data-val"></span></td>
        </tr>
        <tr><td colspan="3"><span class="label">Dirección exacta del negocio</span><span id="c_dir_neg" class="data-val"></span></td></tr>
        <tr><td colspan="3"><span class="label">Dirección exacta del domicilio</span><span id="c_dir_dom" class="data-val"></span></td></tr>
        <tr>
            <td colspan="2"><span class="label">Referencia personal y dirección</span><span id="c_ref_p" class="data-val"></span></td>
            <td><span class="label"># de teléfono</span><span id="c_tel_p" class="data-val"></span></td>
        </tr>
        <tr>
            <td colspan="2"><span class="label">Referencia familiar y dirección</span><span id="c_ref_f" class="data-val"></span></td>
            <td><span class="label"># de teléfono</span><span id="c_tel_f" class="data-val"></span></td>
        </tr>
    </table>

    <div class="section-title">ASALARIADOS</div>
    <table>
        <tr>
            <td><span class="label">Nombre de la empresa</span><span id="c_emp_t" class="data-val"></span></td>
            <td><span class="label">Jefe inmediato</span><span id="c_jefe" class="data-val"></span></td>
            <td><span class="label">Teléfono</span><span id="c_tel_t" class="data-val"></span></td>
        </tr>
        <tr>
            <td><span class="label">Cargo</span><span id="c_cargo" class="data-val"></span></td>
            <td><span class="label">Antigüedad</span><span id="c_ant_lab" class="data-val"></span></td>
            <td><span class="label">Tipo de contrato</span><span id="c_contrato" class="data-val"></span></td>
        </tr>
    </table>

    <div class="section-title">INFORMACIÓN FINANCIERA</div>
    <table>
        <thead>
            <tr style="font-weight: bold; background: #f2f2f2;">
                <th style="width: 33%;">ACTIVOS</th>
                <th style="width: 33%;">INGRESOS</th>
                <th style="width: 34%;">EGRESOS</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="c_list_act"></td>
                <td id="c_list_ing"></td>
                <td id="c_list_egr"></td>
            </tr>
            <tr style="font-weight: bold;">
                <td>TOTAL: L. <span id="c_tot_act"></span></td>
                <td>TOTAL INGRESOS: L. <span id="c_tot_ing"></span></td>
                <td>TOTAL GASTOS: L. <span id="c_tot_egr"></span></td>
            </tr>
        </tbody>
    </table>
    <div style="border: 1px solid black; padding: 5px; text-align: right; font-weight: bold; font-size: 11px;">
        DISPONIBILIDAD: L. <span id="c_dispo"></span>
    </div>

    <div style="margin-top: 5px;">
        <span class="label">Análisis del asesor</span>
        <div id="c_analisis" style="min-height: 35px; border: 1px solid black; padding: 3px;"></div>
    </div>

    <div class="footer-sig">
        <div><div class="sig-line"></div>Firma cliente</div>
        <div><div class="sig-line"></div>Firma, asesor de créditos</div>
        <div><div class="sig-line"></div>Firma, Autorizado SERFIN</div>
    </div>
</div>

<div class="page">
    <table class="no-border">
        <tr>
            <td class="no-border" style="width: 15%;"><img src="https://github.com/rimedhn/servicredith/blob/main/servicredith%20logo.jpeg?raw=true" class="mi-logo" /></td>
            <td class="no-border" style="text-align: center;">
                <h1 class="header-title">FICHA DE AVAL</h1>
                <div style="font-weight: bold; font-size: 14px;">SERFIN</div>
            </td>
            <td class="no-border" style="width: 15%; text-align: right;">
                <span class="label">Fecha</span> <span id="fecha_p2" class="data-val"></span>
            </td>
        </tr>
    </table>

    <table>
        <tr>
            <td colspan="2"><span class="label">Nombre completo</span><span id="a_nombre" class="data-val"></span></td>
            <td><span class="label"># DNI</span><span id="a_dni" class="data-val"></span></td>
        </tr>
        <tr>
            <td><span class="label">Estado civil / Parentesco</span><div class="data-val"><span id="a_civil"></span> / <span id="a_parentesco"></span></div></td>
            <td><span class="label">Ocupación / Edad</span><div class="data-val"><span id="a_ocupacion"></span> / <span id="a_edad"></span></div></td>
            <td><span class="label">Sexo / Celular</span><div class="data-val"><span id="a_sexo"></span> / <span id="a_cel"></span></div></td>
        </tr>
        <tr>
            <td><span class="label">Nombre del negocio</span><span id="a_neg_nom" class="data-val"></span></td>
            <td><span class="label">Antigüedad del negocio</span><span id="a_neg_ant" class="data-val"></span></td>
            <td><span class="label"># de empleados</span><span id="a_empleados" class="data-val"></span></td>
        </tr>
        <tr>
            <td colspan="3">
                <div style="display: flex; justify-content: space-around;">
                    <div><span class="label">Local del Negocio</span> <span class="check-box" id="a_lp"></span> Pro. <span class="check-box" id="a_la"></span> Alqui.</div>
                    <div><span class="label">Casa de habitación</span> <span class="check-box" id="a_cp"></span> Pro. <span class="check-box" id="a_ca"></span> Alqui.</div>
                </div>
            </td>
        </tr>
        <tr><td colspan="3"><span class="label">Dirección exacta del negocio</span><span id="a_dir_neg" class="data-val"></span></td></tr>
        <tr><td colspan="3"><span class="label">Dirección exacta del domicilio</span><span id="a_dir_dom" class="data-val"></span></td></tr>
        <tr>
            <td colspan="2"><span class="label">Referencia personal y dirección</span><span id="a_ref_p" class="data-val"></span></td>
            <td><span class="label"># de teléfono</span><span id="a_tel_p" class="data-val"></span></td>
        </tr>
        <tr>
            <td colspan="2"><span class="label">Referencia familiar y dirección</span><span id="a_ref_f" class="data-val"></span></td>
            <td><span class="label"># de teléfono</span><span id="a_tel_f" class="data-val"></span></td>
        </tr>
    </table>

    <div class="section-title">ASALARIADOS (AVAL)</div>
    <table>
        <tr>
            <td><span class="label">Nombre de la empresa</span><span id="a_emp_t" class="data-val"></span></td>
            <td><span class="label">Jefe inmediato</span><span id="a_jefe" class="data-val"></span></td>
            <td><span class="label">Teléfono</span><span id="a_tel_t" class="data-val"></span></td>
        </tr>
        <tr>
            <td><span class="label">Cargo</span><span id="a_cargo" class="data-val"></span></td>
            <td><span class="label">Antigüedad</span><span id="a_ant_lab" class="data-val"></span></td>
            <td><span class="label">Tipo de contrato</span><span id="a_contrato" class="data-val"></span></td>
        </tr>
    </table>

    <div class="section-title">INFORMACIÓN FINANCIERA (AVAL)</div>
    <table>
        <thead>
            <tr style="font-weight: bold; background: #f2f2f2;">
                <th>ACTIVOS</th>
                <th>INGRESOS</th>
                <th>EGRESOS</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="a_list_act"></td>
                <td id="a_list_ing"></td>
                <td id="a_list_egr"></td>
            </tr>
            <tr style="font-weight: bold;">
                <td>TOTAL: L. <span id="a_tot_act"></span></td>
                <td>TOTAL INGRESOS: L. <span id="a_tot_ing"></span></td>
                <td>TOTAL GASTOS: L. <span id="a_tot_egr"></span></td>
            </tr>
        </tbody>
    </table>
    <div style="border: 1px solid black; padding: 5px; text-align: right; font-weight: bold; font-size: 11px;">
        DISPONIBILIDAD: L. <span id="a_dispo"></span>
    </div>

    <div class="footer-sig" style="margin-top: 50px;">
        <div><div class="sig-line"></div>Firma de aval</div>
        <div><div class="sig-line"></div>Firma, asesor de créditos</div>
        <div><div class="sig-line"></div>Sello SERFIN</div>
    </div>
</div>

<script>
    function getParam(p) {
        return new URLSearchParams(window.location.search).get(p) || "";
    }

    function renderFin(id, nStr, vStr) {
        if (!nStr) return;
        const names = nStr.split(",");
        const values = vStr.split(",");
        const container = document.getElementById(id);
        let html = "";
        names.forEach((n, i) => {
            html += `<div style="display:flex; justify-content:space-between; border-bottom:1px solid #eee; margin-bottom:2px;">
                        <span>${n.trim()}</span>
                        <span>L. ${values[i] ? values[i].trim() : "0.00"}</span>
                     </div>`;
        });
        container.innerHTML = html;
    }

    function fill() {
        const fields = [
            "c_nombre", "c_dni", "c_civil", "c_ciclo", "c_ocupacion", "c_edad", "c_sexo", "c_cel", "c_dependientes", "c_monto", 
            "c_plazo", "c_destino", "c_producto", "c_frecuencia", "c_cuota", "c_tipo_negocio", "c_neg_nom", "c_neg_ant", 
            "c_empleados", "c_dir_neg", "c_dir_dom", "c_ref_p", "c_tel_p", "c_ref_f", "c_tel_f", "c_emp_t", "c_jefe", 
            "c_tel_t", "c_cargo", "c_ant_lab", "c_contrato", "c_tot_act", "c_tot_ing", "c_tot_egr", "c_dispo", "c_analisis",
            "a_nombre", "a_dni", "a_civil", "a_parentesco", "a_ocupacion", "a_edad", "a_sexo", "a_cel", "a_neg_nom", 
            "a_neg_ant", "a_empleados", "a_dir_neg", "a_dir_dom", "a_ref_p", "a_tel_p", "a_ref_f", "a_tel_f", "a_emp_t", 
            "a_jefe", "a_tel_t", "a_cargo", "a_ant_lab", "a_contrato", "a_tot_act", "a_tot_ing", "a_tot_egr", "a_dispo"
        ];

        fields.forEach(f => {
            const el = document.getElementById(f);
            if(el) el.textContent = getParam(f);
        });

        // Checkboxes
        if(getParam("c_lp")) document.getElementById("c_lp").textContent = "X";
        if(getParam("c_la")) document.getElementById("c_la").textContent = "X";
        if(getParam("c_cp")) document.getElementById("c_cp").textContent = "X";
        if(getParam("c_ca")) document.getElementById("c_ca").textContent = "X";
        if(getParam("a_lp")) document.getElementById("a_lp").textContent = "X";
        if(getParam("a_la")) document.getElementById("a_la").textContent = "X";
        if(getParam("a_cp")) document.getElementById("a_cp").textContent = "X";
        if(getParam("a_ca")) document.getElementById("a_ca").textContent = "X";

        // Tablas dinámicas
        renderFin("c_list_act", getParam("c_act_n"), getParam("c_act_v"));
        renderFin("c_list_ing", getParam("c_ing_n"), getParam("c_ing_v"));
        renderFin("c_list_egr", getParam("c_egr_n"), getParam("c_egr_v"));
        renderFin("a_list_act", getParam("a_act_n"), getParam("a_act_v"));
        renderFin("a_list_ing", getParam("a_ing_n"), getParam("a_ing_v"));
        renderFin("a_list_egr", getParam("a_egr_n"), getParam("a_egr_v"));

        const date = getParam("fecha") || new Date().toLocaleDateString();
        document.getElementById("fecha_p1").textContent = date;
        document.getElementById("fecha_p2").textContent = date;
    }

    window.onload = fill;
</script>
</body>
</html>
